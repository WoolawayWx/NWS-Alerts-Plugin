(()=>{"use strict";const e=window.wp.blocks,t=(window.wp.element,window.wp.blockEditor,window.ReactJSXRuntime);(0,e.registerBlockType)("nws-alerts-plugin/nws-alerts-block",{title:"NWS Alerts Block",icon:"warning",category:"widgets",attributes:{content:{type:"string",source:"html",selector:"p"}},edit:({attributes:e,setAttributes:n})=>(0,t.jsx)("p",{style:{padding:"10px",backgroundColor:"#ffeb3b",color:"#333"},children:"NWS Alerts will be displayed here on the frontend."}),save:()=>(0,t.jsx)("div",{id:"nws-alerts-plugin-container"})}),document.addEventListener("DOMContentLoaded",(function(){!function(e){function t(){var t=JSON.parse(nwsPluginData.countyZones),n=Object.keys(t),r=nwsPluginData.pluginUrl+"assets/json/colors.json",o={},s=JSON.parse(nwsPluginData.customColors||"{}");fetch(r).then((e=>e.json())).then((r=>{o=r;var i=[],a=n.map((e=>fetch(`https://api.weather.gov/alerts/active/zone/${e}`).then((e=>e.json())).then((n=>{n.features&&n.features.length>0&&(n.features.forEach((n=>{n.countyName=t[e]})),i=i.concat(n.features))})).catch((t=>console.error(`Error fetching data for zone ${e}:`,t)))));Promise.all(a).then((()=>{var t=e("#nws-alerts-plugin-container");if(t.empty(),i.length>0){var n=0;function r(){var e,r,a;r=(e=i[n]).properties.event,a=`\n                                    <div class="nws-alert" style="background-color: ${s[r]?.background||o[r]?.background||"white"}; color: ${s[r]?.text||o[r]?.text||"black"}; padding: 10px; border-radius: 5px; margin-bottom: 10px;">\n                                        <h3><strong>${e.countyName}: </strong>${e.properties.event}</h3>\n                                        <p>From ${new Date(e.properties.onset).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})} \n                                           till ${new Date(e.properties.ends).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})} \n                                           by ${e.properties.senderName}</p>\n                                        <div class="additional-details" style="display: none;">\n                                            <p>${e.properties.description||"No description available."}</p>\n                                            <p><strong>Severity:</strong> ${e.properties.severity}</p>\n                                            <p><strong>Certainty:</strong> ${e.properties.certainty}</p>\n                                            <p><strong>Urgency:</strong> ${e.properties.urgency}</p>\n                                        </div>\n                                    </div>\n                                `,t.html(a),n=(n+1)%i.length}r(),setInterval(r,1e4)}}))})).catch((e=>console.error("Error fetching colors data:",e)))}t(),setInterval(t,3e5)}(jQuery)}))})();